<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Ioan A. È˜ucan, Mark Moll, Lydia E. Kavraki">
<title>Planning using the Vortex physics engine</title>
<link href="http://ompl.kavrakilab.org/tabs.css" rel="stylesheet" type="text/css"/>
<script src="http://ompl.kavrakilab.org/jquery.js"></script>
<script src="http://ompl.kavrakilab.org/dynsections.js"></script>
<link href="http://ompl.kavrakilab.org/search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="http://ompl.kavrakilab.org/search/searchdata.js"></script>
<script type="text/javascript" src="http://ompl.kavrakilab.org/search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 
*/
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js
"></script>
  <link href="http://ompl.kavrakilab.org/doxygen.css" rel="stylesheet" type="text/css" />

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link href="http://ompl.kavrakilab.org/ompl.css" rel="stylesheet">

  </head>
  <body>
    <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
  <nav class="navbar navbar-expand-md fixed-top navbar-dark">
    <a class="navbar-brand" href="./index.html">OMPL</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbar">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item"><a class="nav-link" href="http://ompl.kavrakilab.org/download.html">Download</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="docDropdown" role="button" data-toggle
="dropdown" aria-haspopup="true" aria-expanded="false">Documentation</a>
          <div class="dropdown-menu" aria-labelledby="docDropdown">
            <a class="dropdown-item" href="https://ompl.kavrakilab.org/OMPL_Primer.pdf">Primer</a
>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/installation.html">Installation</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/tutorials.html">Tutorials</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/group__demos.html">Demos</a>
            <a class="dropdown-item omplapp" href="http://ompl.kavrakilab.org/gui.html">OMPL.app GUI</a>
            <a class="dropdown-item omplapp" href="http://ompl.kavrakilab.org/webapp.html">OMPL web app</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/python.html">Python Bindings</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/planners.html">Available Planners</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/plannerTerminationConditions.html">Planner Termination Conditions</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/benchmark.html">Benchmarking Planners</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/spaces.html">Available State Spaces</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/optimalPlanning.html">Optimal Planning</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/constrainedPlanning.html">Constrained Planning</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/FAQ.html">FAQ</a>
            <div class="dropdown-divider"></div>
            <div class="dropdown-header">External links</div>
            <a class="dropdown-item" href="http://moveit.ros.org">MoveIt</a>
            <a class="dropdown-item" href="http://plannerarena.org">Planner Arena</a>
            <a class="dropdown-item" href="http://moveit.ros.org/wiki/Tutorials/ICRA2013">ICRA 2013 Tutorial</a>
            <a class="dropdown-item" href="http://kavrakilab.org/iros2011/">IROS 2011 Tutorial</a>
          </div>
        </li>
        <li class="nav-item"><a class="nav-link" href="http://ompl.kavrakilab.org/gallery.html">Gallery</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="codeDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Code</a>
          <div class="dropdown-menu" aria-labelledby="codeDropdown">
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/api_overview.html">API Overview</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/annotated.html">Classes</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/files.html">Files</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/styleGuide.html">Style Guide</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/integration.html">Use OMPL within Other Systems</a>
            <div class="dropdown-divider"></div>
            <div class="dropdown-header">Repositories</div>
            <a class="dropdown-item" href="https://github.com/ompl/ompl">ompl on GitHub</a>
            <a class="dropdown-item" href="https://github.com/ompl/omplapp">omplapp on GitHub</a>
            <div class="dropdown-divider"></div>
            <div class="dropdown-header">Continuous Integration</div>
            <a class="dropdown-item" href="https://travis-ci.org/ompl/ompl">ompl on Travis CI (Linux/macOS)</a>
            <a class="dropdown-item" href="https://travis-ci.org/ompl/omplapp">omplapp on Travis CI (Linux/macOS)</a>
            <a class="dropdown-item" href="https://ci.appveyor.com/project/mamoll/ompl">ompl on AppVeyor CI (Windows)</a>
            <a class="dropdown-item" href="https://ci.appveyor.com/project/mamoll/omplapp">omplapp on AppVeyor CI (Windows)</a>
          </div>
        </li>
        <li class="nav-item"><a class="nav-link" href="https://github.com/ompl/ompl/issues">Issues</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="communityDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Community</a>
          <div class="dropdown-menu" aria-labelledby="communityDropdown">
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/support.html">Get Support</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/developers.html">Developers/Contributors</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/contrib.html">Submit a Contribution</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/education.html">Education</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="aboutDropdown" role="button"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About</a>
          <div class="dropdown-menu" aria-labelledby="aboutDropdown">
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/license.html">License</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/citations.html">Citations</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/acknowledgements.html">Acknowledgments</a>
          </div>
        </li>
        <li class="nav-item"><a class="nav-link" href="https://ompl.kavrakilab.org/blog.html">Blog</a></li>
      </ul>
              <div id="MSearchBox" class="MSearchBoxInactive">
      <span class="left">
        <img id="MSearchSelect" src="http://ompl.kavrakilab.org/search/mag_sel.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        </span><span class="right">
          <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="http://ompl.kavrakilab.org/search/close.png" alt=""/></a>
        </span>
      </div>
    </div>
  </nav>
<div class="container" role="main">
  <div><!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
   onmouseover="return searchBox.OnSearchSelectShow()"
   onmouseout="return searchBox.OnSearchSelectHide()"
   onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
      name="MSearchResults" id="MSearchResults">
</iframe>
</div>


    

    <div class="container">
      <div class="row">
        <div class="page-header defaultfullwidth">
          <h1>Planning using the Vortex physics engine</h1>
          <h4><a href="http://mmoll.rice.edu">Mark Moll</a>
        </div>

        <div class="defaultfullwidth">
          <p>OMPL can be used to plan for complex systems that can be simulated by a physics engine. From a planning perspective, the physics engine is a black box that acts like a <a href="http://ompl.kavrakilab.org/classompl_1_1control_1_1StatePropagator.html">state propagator</a>. OMPL includes support for the <a href="http://ode.org">Open Dynamics Engine (OpenDE)</a>, but support for other physics engines can be added using the OpenDE bindings as a starting point.
To show that this can indeed be done, I have developed bindings for <a href="http://www.vxsim.com/">Vortex</a>. <a href="http://www.vxsim.com/">Vortex</a> is a commercial physics simulator. It contains incredibly detailed models for vehicles (transmission, gears, suspension, etc.) and surface interactions. It also has snazzy OpenSceneGraphics built in. The bindings mirror the structure of the OpenDE bindings. To use these bindings, the user has to implement some derived classes. The derived VortexEnvironment class needs to define the simulated environment and how controls map forces, torques or velocities in the simulation. The derived state space is responsible for defining a distance between states. Interestingly, the VortexStateSpace represents states completely opaquely: the dimensionality is unknown and the internal structure is unknown. There is just a distance function and a user-defined projection to a low-dimensional embedding. This is sufficient for planners like KPIECE, SBL, and EST (but not RRT, which needs to be able to sample uniformly random states). I have attached a patch for OMPL 0.10.2 that adds vortex support. You can also download and extract the tar file which adds the Vortex-related files and overwrites a few files to add Vortex support.</p>

<p>Below is a simple demo program (included in the patch and tar file) that illustrates very basic usage of the Vortex support. In this demo the objective is to push a box from a starting position to a desired goal region. Once a solution is found, it uses the Vortex graphics capabilities to play back the path.</p>

<iframe src="http://ompl.kavrakilab.org/files/VortexRigidBodyPlanning_8cpp_source.html" width="100%" height="480px" scrolling="yes">
</iframe>

<p>The inputs do not need to correspond to forces or torques. They can also be inputs to a controller. For example, if you want to plan for a VxVehicle, you could have function that maps OMPL controls to the simulator like so:</p>

<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">virtual</span> <span class="kt">void</span> <span class="n">applyControl</span><span class="p">(</span><span class="k">const</span> <span class="kt">double</span> <span class="o">*</span><span class="n">control</span><span class="p">)</span> <span class="k">const</span>
<span class="p">{</span>
    <span class="kt">double</span> <span class="n">throttle</span> <span class="o">=</span> <span class="n">control</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">steering</span><span class="o">=</span><span class="n">control</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">throttle</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">vehicle</span><span class="o">-&gt;</span><span class="n">getEngine</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">setInputThrottle</span><span class="p">(</span><span class="n">throttle</span><span class="p">);</span>
    <span class="k">else</span>
        <span class="n">vehicle</span><span class="o">-&gt;</span><span class="n">setBrakeInput</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span><span class="n">throttle</span><span class="p">);</span>
    <span class="n">vehicle</span><span class="o">-&gt;</span><span class="n">setSteeringInput</span><span class="p">(</span><span class="n">steering</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>The attached code has only been lightly tested, but if you find it useful or end up extending it, please let us know.</p>

<h2 id="download">Download:</h2>

<p><a href="http://ompl.kavrakilab.orgfiles/patch-vortex.diff.gz">[patch-vortex.diff]</a>
<a href="http://ompl.kavrakilab.orgfiles/vortex.tar.gz">[vortex.tar]</a></p>

        </div>
      </div>
    </div>

    <footer class="footer">
  <div class="container">
    <a href="http://www.kavrakilab.org">Kavraki Lab</a>  &bull;
    <a href="https://www.cs.rice.edu">Department of Computer Science</a> &bull;
    <a href="https://www.rice.edu">Rice University</a><br/>
    Funded in part by the <a href="https://www.nsf.gov">National Science Foundation</a><br/>
    Documentation generated by <a href="http://www.doxygen.org/index.html">doxygen</a> 1.8.18
  </div>
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9156598-2', 'auto');
  ga('send', 'pageview');
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>
</html>
