<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Ioan A. Șucan, Mark Moll, Lydia E. Kavraki">
<title>From differential equations to planning in one function</title>
<link href="http://ompl.kavrakilab.org/tabs.css" rel="stylesheet" type="text/css"/>
<script src="http://ompl.kavrakilab.org/jquery.js"></script>
<script src="http://ompl.kavrakilab.org/dynsections.js"></script>
<link href="http://ompl.kavrakilab.org/search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="http://ompl.kavrakilab.org/search/searchdata.js"></script>
<script type="text/javascript" src="http://ompl.kavrakilab.org/search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 
*/
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js
"></script>
  <link href="http://ompl.kavrakilab.org/doxygen.css" rel="stylesheet" type="text/css" />

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link href="http://ompl.kavrakilab.org/ompl.css" rel="stylesheet">

  </head>
  <body>
    <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
  <nav class="navbar navbar-expand-md fixed-top navbar-dark">
    <a class="navbar-brand" href="./index.html">OMPL</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbar">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item"><a class="nav-link" href="http://ompl.kavrakilab.org/download.html">Download</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="docDropdown" role="button" data-toggle
="dropdown" aria-haspopup="true" aria-expanded="false">Documentation</a>
          <div class="dropdown-menu" aria-labelledby="docDropdown">
            <a class="dropdown-item" href="https://ompl.kavrakilab.org/OMPL_Primer.pdf">Primer</a
>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/installation.html">Installation</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/tutorials.html">Tutorials</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/group__demos.html">Demos</a>
            <a class="dropdown-item omplapp" href="http://ompl.kavrakilab.org/gui.html">OMPL.app GUI</a>
            <a class="dropdown-item omplapp" href="http://ompl.kavrakilab.org/webapp.html">OMPL web app</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/python.html">Python Bindings</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/planners.html">Available Planners</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/plannerTerminationConditions.html">Planner Termination Conditions</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/benchmark.html">Benchmarking Planners</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/spaces.html">Available State Spaces</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/optimalPlanning.html">Optimal Planning</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/constrainedPlanning.html">Constrained Planning</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/FAQ.html">FAQ</a>
            <div class="dropdown-divider"></div>
            <div class="dropdown-header">External links</div>
            <a class="dropdown-item" href="http://moveit.ros.org">MoveIt</a>
            <a class="dropdown-item" href="http://plannerarena.org">Planner Arena</a>
            <a class="dropdown-item" href="http://moveit.ros.org/wiki/Tutorials/ICRA2013">ICRA 2013 Tutorial</a>
            <a class="dropdown-item" href="http://kavrakilab.org/iros2011/">IROS 2011 Tutorial</a>
          </div>
        </li>
        <li class="nav-item"><a class="nav-link" href="http://ompl.kavrakilab.org/gallery.html">Gallery</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="codeDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Code</a>
          <div class="dropdown-menu" aria-labelledby="codeDropdown">
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/api_overview.html">API Overview</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/annotated.html">Classes</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/files.html">Files</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/styleGuide.html">Style Guide</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/integration.html">Use OMPL within Other Systems</a>
            <div class="dropdown-divider"></div>
            <div class="dropdown-header">Repositories</div>
            <a class="dropdown-item" href="https://github.com/ompl/ompl">ompl on GitHub</a>
            <a class="dropdown-item" href="https://github.com/ompl/omplapp">omplapp on GitHub</a>
            <div class="dropdown-divider"></div>
            <div class="dropdown-header">Continuous Integration</div>
            <a class="dropdown-item" href="https://travis-ci.org/ompl/ompl">ompl on Travis CI (Linux/macOS)</a>
            <a class="dropdown-item" href="https://travis-ci.org/ompl/omplapp">omplapp on Travis CI (Linux/macOS)</a>
            <a class="dropdown-item" href="https://ci.appveyor.com/project/mamoll/ompl">ompl on AppVeyor CI (Windows)</a>
            <a class="dropdown-item" href="https://ci.appveyor.com/project/mamoll/omplapp">omplapp on AppVeyor CI (Windows)</a>
          </div>
        </li>
        <li class="nav-item"><a class="nav-link" href="https://github.com/ompl/ompl/issues">Issues</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="communityDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Community</a>
          <div class="dropdown-menu" aria-labelledby="communityDropdown">
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/support.html">Get Support</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/developers.html">Developers/Contributors</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/contrib.html">Submit a Contribution</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/education.html">Education</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="aboutDropdown" role="button"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About</a>
          <div class="dropdown-menu" aria-labelledby="aboutDropdown">
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/license.html">License</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/citations.html">Citations</a>
            <a class="dropdown-item" href="http://ompl.kavrakilab.org/acknowledgements.html">Acknowledgments</a>
          </div>
        </li>
        <li class="nav-item"><a class="nav-link" href="https://ompl.kavrakilab.org/blog.html">Blog</a></li>
      </ul>
              <div id="MSearchBox" class="MSearchBoxInactive">
      <span class="left">
        <img id="MSearchSelect" src="http://ompl.kavrakilab.org/search/mag_sel.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        </span><span class="right">
          <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="http://ompl.kavrakilab.org/search/close.png" alt=""/></a>
        </span>
      </div>
    </div>
  </nav>
<div class="container" role="main">
  <div><!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
   onmouseover="return searchBox.OnSearchSelectShow()"
   onmouseout="return searchBox.OnSearchSelectHide()"
   onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
      name="MSearchResults" id="MSearchResults">
</iframe>
</div>


    

    <div class="container">
      <div class="row">
        <div class="page-header defaultfullwidth">
          <h1>From differential equations to planning in one function</h1>
          <h4><a href="http://ryanluna.com">Ryan Luna</a>
        </div>

        <div class="defaultfullwidth">
          <p>When planning for a physical robot, the motion of the system is constrained due to those pesky “laws of physics.”  If you drive your car to the grocery store, you cannot directly control the position of the car or even how fast it moves down the street.  <em>Terrifying!</em>  You can only control the rate at which the velocity changes (acceleration) and the direction the car is steering toward.  Furthermore, the acceleration of our cars is bounded; we cannot stop immediately or achieve a particular speed instantly.  This makes the car a second-order system.  We can directly control the acceleration, but the velocity and position are the result of the changes in acceleration and steering angle over time.  The same scenario applies to physical robots: a typical system cannot be explicitly controlled.  Instead, we apply a series of inputs (like pressing the gas or the brake in a car) to control motors and other actuators to execute a motion plan.  Mathematically we can describe the motion of a robot as a set of ordinary differential equations which depend on an input control and time.  The exact state of a robot can then be computed by integrating the equations given the control input and duration to apply that input.</p>

<p>OMPL’s <a href="http://ompl.kavrakilab.org/classompl_1_1control_1_1StatePropagator.html">StatePropagator</a> concept can be used to incorporate integration of the differential equations for the system, but the user is tasked with implementing the ODE, integrating the equations and updating the state for the system, as in the <a href="http://ompl.kavrakilab.org/RigidBodyPlanningWithIntegrationAndControls_8cpp_source.html">rigid body planning with integration and controls</a> demo.  This task is simplified in OMPL v0.10 with the addition of the <a href="http://ompl.kavrakilab.org/classompl_1_1control_1_1ODESolver.html">ODESolver</a> class, which takes care of numerical integration and state updates.  All the user has to do is provide the ODE definition in <strong>a single function</strong>:</p>

<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">void</span> <span class="n">ODE</span><span class="p">(</span><span class="k">const</span> <span class="n">ODESolver</span><span class="o">::</span><span class="n">StateType</span> <span class="o">&amp;</span><span class="n">q</span><span class="p">,</span> <span class="k">const</span> <span class="n">Control</span> <span class="o">*</span><span class="n">c</span><span class="p">,</span> <span class="n">ODESolver</span><span class="o">::</span><span class="n">StateType</span> <span class="o">&amp;</span><span class="n">qdot</span><span class="p">)</span>
    <span class="cm">/* Insert code here */</span>
<span class="err">}</span></code></pre></figure>

<p>This method takes the input state q and a control c, and computes the change in the value of q, storing the differential into <code class="language-plaintext highlighter-rouge">qdot</code>.  The <a href="http://ompl.kavrakilab.org/classompl_1_1control_1_1ODESolver.html">ODESolver</a> wraps around the open-source <a href="http://odeint.org">ODEInt library</a>, which provides methods for high-order numerical integration.  Gone are the days of worrying about the numerical instability and potential large error of quick and dirty Euler integration.  A StatePropagator object can be extracted from the ODESolver class which encapsulates the entire integration and update process.</p>

<p>A <a href="http://ompl.kavrakilab.org/odeint.html">tutorial</a> has been created to show how to use OMPL’s ODESolver class in further detail. A new demo is also bundled in OMPL v0.10, <a href="http://ompl.kavrakilab.org/RigidBodyPlanningWithODESolverAndControls_8cpp_source.html">rigid body planning with ODESolver and controls</a>, which shows a comparison with the “old” way of doing things and how the ODESolver simplifies this process.  The ODEInt library is bundled with OMPL, so there is no extra dependency to install, and by using the ODESolver class you’ll be planning for your system in no time!  Below are plots of actual paths computed using the ODESolver for an inverted pendulum and a second-order car:</p>

<p><img src="http://ompl.kavrakilab.org/files/Pendulum.png" alt="pendulum path" width="35%" />
<img src="http://ompl.kavrakilab.org/files/Car.png" alt="car path" width="60%" /></p>


        </div>
      </div>
    </div>

    <footer class="footer">
  <div class="container">
    <a href="http://www.kavrakilab.org">Kavraki Lab</a>  &bull;
    <a href="https://www.cs.rice.edu">Department of Computer Science</a> &bull;
    <a href="https://www.rice.edu">Rice University</a><br/>
    Funded in part by the <a href="https://www.nsf.gov">National Science Foundation</a><br/>
    Documentation generated by <a href="http://www.doxygen.org/index.html">doxygen</a> 1.8.18
  </div>
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9156598-2', 'auto');
  ga('send', 'pageview');
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>
</html>
