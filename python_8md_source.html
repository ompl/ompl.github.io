<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>ompl/doc/markdown/python.md Source File</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Ioan A. Șucan, Mark Moll, Lydia E. Kavraki">
  <meta name="generator" content="Doxygen 1.8.14"/>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-powertip/1.2.0/jquery.powertip.min.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
  <link href="ompl.css" rel="stylesheet">
</head>
<body>
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <nav class="navbar navbar-inverse navbar-fixed-top" id="top" role="navigation">
    <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="./index.html">OMPL</a>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="navbar-collapse">
        <ul class="nav navbar-nav">
          <li><a href="download.html">Download</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="http://ompl.kavrakilab.org/OMPL_Primer.pdf">Primer</a></li>
              <li><a href="installation.html">Installation</a></li>
              <li><a href="tutorials.html">Tutorials</a></li>
              <li><a href="group__demos.html">Demos</a></li>
              <li><a href="gui.html">OMPL.app GUI</a></li><li><a href="webapp.html">OMPL web app</a></li>
              <li><a href="python.html">Python Bindings</a></li>
              <li><a href="planners.html">Available Planners</a></li>
              <li><a href="benchmark.html">Benchmarking Planners</a></li>
              <li><a href="spaces.html">Available State Spaces</a></li>
              <li><a href="optimalPlanning.html">Optimal Planning</a></li>
              <li><a href="constrainedPlanning.html">Constrained Planning</a></li>
              <li><a href="FAQ.html">FAQ</a></li>
              <li class="divider"></li>
              <li class="dropdown-header">External links</li>
              <li><a href="http://moveit.ros.org">MoveIt!</a></li>
              <li><a href="http://plannerarena.org">Planner Arena</a></li>
              <li><a href="http://robotics.naist.jp/edu/text/?Robotics%2FOMPL">Japanese Introduction to OMPL</a></li>
              <li><a href="http://robotics.naist.jp/edu/text/?Robotics%2FExercise%2FOMPLProgramming">Japanese OMPL Tutorial</a></li>
              <li><a href="http://moveit.ros.org/wiki/Tutorials/ICRA2013">ICRA 2013 Tutorial</a></li>
              <li><a href="http://kavrakilab.org/OMPLtutorial">IROS 2011 Tutorial</a></li>
            </ul>
          </li>
          <li><a href="gallery.html">Gallery</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Code <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="api_overview.html">API Overview</a></li>
              <li><a href="annotated.html">Classes</a></li>
              <li><a href="files.html">Files</a></li>
              <li><a href="styleGuide.html">Style Guide</a></li>
              <li><a href="integration.html">Use OMPL within Other Systems</a></li>
              <li class="divider"></li>
              <li class="dropdown-header">Repositories</li>
              <li><a href="https://bitbucket.org/ompl/ompl">ompl on Bitbucket (Mercurial)</a></li>
              <li><a href="https://bitbucket.org/ompl/omplapp">omplapp on Bitbucket (Mercurial)</a></li>
              <li><a href="https://github.com/ompl/ompl">ompl on GitHub</a></li>
              <li><a href="https://github.com/ompl/omplapp">omplapp on GitHub</a></li>
              <li class="divider"></li>
              <li class="dropdown-header">Continuous Integration</li>
              <li><a href="https://travis-ci.org/ompl/ompl">ompl on Travis CI (Linux/macOS)</a></li>
              <li><a href="https://travis-ci.org/ompl/omplapp">omplapp on Travis CI (Linux/macOS)</a></li>
              <li><a href="https://ci.appveyor.com/project/mamoll/ompl">ompl on AppVeyor CI (Windows)</a></li>
              <li><a href="https://ci.appveyor.com/project/mamoll/omplapp">omplapp on AppVeyor CI (Windows)</a></li>
            </ul>
          </li>
          <li><a href="https://github.com/ompl/ompl/issues">Issues</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Community <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="mailingLists.html">Mailing Lists</a></li>
              <li><a href="developers.html">Developers</a></li>
              <li><a href="thirdparty.html">Contributions</a></li>
              <li><a href="contrib.html">Submit Contribution</a></li>
              <li><a href="education.html">Education</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="license.html">License</a></li>
              <li><a href="citations.html">Citations</a></li>
              <li><a href="acknowledgements.html">Acknowledgments</a></li>
              <li><a href="contact.html">Contact Us</a></li>
            </ul>
          </li>
          <li><a href="http://ompl.kavrakilab.org/blog.html">Blog</a></li>
                  <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)"
               onblur="searchBox.OnSearchFieldFocus(false)"
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
        </ul>
      </div>
    </div>
  </nav>
  <div class="container" role="main">
    <div>
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ompl/doc/markdown/python.md</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# Python Bindings {#python}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;Almost all of the functionality of the C++ OMPL library is accessible through Python using more or less the same API. Some important differences will be described below. The Python bindings are generated with [Py++](https://bitbucket.org/ompl/pyplusplus), which relies on [Boost.Python](http://www.boost.org/doc/libs/release/libs/python/doc). The bindings are packaged in the ompl module. The main namespaces (ompl::base, ompl::control, ompl::geometric) are available as sub-modules. To quickly get an idea of what classes, functions, etc., are available within each submodule, type something like this at the Python prompt:</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;~~~{.py}</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;from ompl import base, control, geometric, tools, util</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;dir(base), dir(control), dir(geometric), dir(tools), dir(util)</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;~~~</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;# Contents</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; </div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;- \ref py_good_practices</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;- \ref cpp_py_diffs</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;- \ref py_api_diffs</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;- \ref py_example</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;- \ref pyfunction_to_stdfunction</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;- \ref updating_python_bindings</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;# Usage of the Python bindings: Good practices {#py_good_practices}</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;Although almost all C++ functionality is exposed to Python, there are some caveats to be aware off:</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;- By default OMPL often returns a reference to an internal object when the original C++ function or method returns a reference or takes a reference as input. This means that you have to be careful about the scope of variables. Python objects need to exist as long as there exist at least one OMPL object that contains a reference to it. Analogously, you should not try to use Python variables that point to OMPL objects that have already been destroyed.</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;- C++ threads and Boost.Python don&#39;t mix; see the [Boost.Python FAQ](http://www.boost.org/libs/python/doc/v2/faq.html). If you have multi-threaded C++ code where multiple threads can call the Python interpreter at the same time, then this can lead to crashes. For that reason, we do not have Python bindings for the parallelized RRT and SBL planners, because they can call a Python state validator function at the same time.</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;- Just because you \em can create Python classes that derive from C++ classes, this doesn&#39;t mean it is a good idea. You pay a performance penalty each time your code crosses the Python-C++ barrier (objects may need to copied, locks acquired, etc.). This means that it is an especially bad idea to override low-level classes. For low-level functionality it is best to stick to the built-in OMPL functionality and use just the callback functions (e.g., for state validation and state propagation). It is also highly recommended to use the ompl::geometric::SimpleSetup and ompl::control::SimpleSetup classes rather than the lower-level classes for that same reason.</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;# Important differences between C++ and Python {#cpp_py_diffs}</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;- There are no templates in Python, so templated C++ classes and functions need to be fully instantiated to allow them to be exposed to python.</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;- There are no C-style pointers in python, and no “new” or “delete” operators. This could be a problem, but can be dealt with mostly by using [shared_ptr](http://en.cppreference.com/w/cpp/memory/shared_ptr)&#39;s. If a C++ function takes pointer input/output parameters, _usually_ a reference to the object is passed in the python bindings. In other words, you should be able to get and set the current value of an object through its methods. In some cases odd side effects may occur if you pass temporary objects (e.g., `function_call(Constructor_call())`), so it&#39;s advisable to create variables with the appropriate scope.</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;# Differences between the C++ and Python API&#39;s {#py_api_diffs}</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;- An STL vector of int&#39;s is of type vectorInt in Python (analogously for other types).</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;- The C++ class State has been renamed AbstractState, while the C++ class ScopedState&lt;&gt; is called State in Python.</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;- The C++ class ScopedState&lt;RealVectorStateSpace&gt; is called RealVectorState. The ScopedState&#39;s for the other pre-defined state spaces have been renamed analogously.</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;- The C++ class RealVectorStateSpace::StateType has been renamed to RealVectorStateInternal (analogously for the other state space types), to emphasize that an end user should really be using RealVectorState.</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;- To get a reference to a C++ State stored inside a ScopedState from Python, use the &quot;()&quot; operator:</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;~~~{.py}</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;spc = SE3StateSpace()  # create an SE(3) state space</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;s = State(spc)         # allocate a state corresponding to a C++ ScopedState&lt;SE3StateSpace&gt;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;sref = s()             # sref corresponds to a C++ State*. In this case sref is</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                       # a reference to SE3StateSpace::StateType</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;sref.setX(1.0)         # set the X coordinate</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;s().setX(1.0)          # this also works</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;~~~</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;- The print method (for classes that have one) is mapped to the special python method __str__, so a C++ call like `foo.print(std::cout)` becomes `print(foo)` in python. Similarly, a C++ call like `foo.printSettings(std::cout)` becomes `print(foo.settings())` in python.</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;- The code for constrained motion planning heavily relies on the [Eigen C++ library](http://eigen.tuxfamily.org/index.php?title=Main_Page). Input and output arguments of type `Eigen::Ref&lt;Eigen::VectorXd&gt;` or `Eigen::Ref&lt;Eigen::MatrixXd&gt;` are automatically converted to `numpy.array` types. This is done without copying data; under the hood there are simply wrappers that pass pointers to the raw data. These wrappers still need to be dynamically allocated and freed, so do not expect constrained planning in Python to be very fast. See the Python demos in `ompl/demos/constraint` for some examples.</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;Many of the python demo and test programs are direct ports of the corresponding C++ programs. If you compare these programs, the sometimes subtle differences will become more obvious. In the python programs you will notice that we can create python classes that derive from C++ classes and pass instances of such classes to C++ functions. Similarly, we can create python functions (such as state validity checkers or propagate functions) that can be called by C++ code.</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;# A simple example {#py_example}</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;Below is a simple annotated example. It is available in ompl/py-bindings/demos/RigidBodyPlanning.py.</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;~~~{.py}</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;from ompl import base as ob</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;from ompl import geometric as og</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;def isStateValid(state):</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    # &quot;state&quot; is of type SE2StateInternal, so we don&#39;t need to use the &quot;()&quot;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    # operator.</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    #</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    # Some arbitrary condition on the state (note that thanks to</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    # dynamic type checking we can just call getX() and do not need</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    # to convert state to an SE2State.)</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    return state.getX() &lt; .6</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;def plan():</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    # create an SE2 state space</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    space = ob.SE2StateSpace()</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    # set lower and upper bounds</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    bounds = ob.RealVectorBounds(2)</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    bounds.setLow(-1)</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    bounds.setHigh(1)</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    space.setBounds(bounds)</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    # create a simple setup object</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    ss = og.SimpleSetup(space)</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    ss.setStateValidityChecker(ob.StateValidityCheckerFn(isStateValid))</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    start = ob.State(space)</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    # we can pick a random start state...</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    start.random()</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    # ... or set specific values</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    start().setX(.5)</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    goal = ob.State(space)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    # we can pick a random goal state...</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    goal.random()</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    # ... or set specific values</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    goal().setX(-.5)</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    ss.setStartAndGoalStates(start, goal)</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    # this will automatically choose a default planner with</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    # default parameters</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    solved = ss.solve(1.0)</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    if solved:</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        # try to shorten the path</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        ss.simplifySolution()</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        # print the simplified path</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        print ss.getSolutionPath()</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;if __name__ == &quot;__main__&quot;:</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    plan()</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;~~~</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;# Creating std::function objects from Python functions {#pyfunction_to_stdfunction}</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;OMPL relies heavily on std::function objects for callback functions. To specify a Python function as a callback function, that function needs to be cast to the right function type. The simple example above already showed how to do this for a state validity checker function:</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;~~~{.py}</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;ss.setStateValidityChecker(ob.StateValidityCheckerFn(isStateValid))</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;~~~</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;If you need to pass extra arguments to a function, you can use the Python `partial` function like so:</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;~~~{.py}</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;from functools import partial</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;def isStateValid(spaceInformation, state):</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    return spaceInformation.satiesfiesBounds(state)</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;def plan()</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    ...</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    isValidFn = ob.StateValidityCheckerFn(partial(isStateValid, ss.getSpaceInformation()))</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    ss.setStateValidityChecker(isValidFn)</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    ...</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;~~~</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;## (Re)generating the Python bindings {#updating_python_bindings}</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;\attention See also the tutorial [Creating Python bindings for a new planner](pybindingsPlanner.html)</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;The Python bindings are subdivided into modules, to reflect the main namespaces: ompl::base, ompl::control, and ompl::geometric. The code in the ompl/src/ompl/util directory is available in a submodule as well. Whenever you change the API to OMPL, you will need to update the Python bindings. Updating the bindings is a two-step process. First, the code for the modules needs to be generated. Second, the code needs to be compiled into binary Python modules.</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;### Code generation {#binding_code_generation}</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;__The code for the Python bindings can be generated by typing “`make update_bindings`.”__ This creates one header file per module, formed by concatenating all relevant header files for that module. This header file is then parsed by Py++ and the appropriate C++ code is generated. This code uses Boost.Python. Py++ is smart enough to create wrapper classes when necessary, register Python &lt;-&gt; C++ type conversions, and so on. If you only need to update the bindings for one module (say `base`), you can type “`make update_base_bindings`.” Any diagnostic information from Py++ is stored in a log file in the build directory for each module (`pyplusplus_base.log` for the module `base` and likewise for other modules). You can remove all generated code by typing “`make clean_bindings`”. This is sometimes necessary if Py++ gets confused about which code needs to be regenerated. If this happens, all the generated code might still compile, but you can get odd crashes or errors at runtime.</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;For each module the relevant header files are listed in `ompl/py-bindings/headers_&lt;_modulename_&gt;.txt.` The order in which the header files are listed is important. A header file should not be included by another header file listed above it. If you have created new header files, you should add the names of these files to the appropriate `headers_&lt;_modulename_&gt;.txt.` file.</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;### Compiling the Python modules {#compile_bindings}</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;To compile the Python modules type “`make py_ompl`” (or simply “make”). If you only want to compile one python module (say `base`), type “`make py_ompl_base`.” The modules will appear as libraries in the lib subdirectory in the build directory, but they are also copied to `ompl/py-bindings/ompl/&lt;_modulename_&gt;/_&lt;_modulename_&gt;.so`.</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;### Forcing CMake to do The Right Thing {#bindings_cmake}</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;Every attempt has been to have CMake correctly identify dependencies and only compile code when necessary. If you want force CMake to regenerate the bindings from scratch, you can type “`make clean_bindings`,” followed by “`make update_bindings`” again. If, on the other hand, you want to (temporarily) disable the compilation of Python bindings, type:</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    cmake -D OMPL_BUILD_PYBINDINGS:BOOL=OFF .</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;in your build directory. You can re-enable them, by running this command again, but with OFF changed to ON. Changing these settings can also be done through the CMake GUI.</div></div><!-- fragment --></div><!-- contents -->
</div>
<footer class="footer">
  <div class="container"><p>
    <a href="http://www.kavrakilab.org">Kavraki Lab</a>  &bull;
    <a href="https://www.cs.rice.edu">Department of Computer Science</a> &bull;
    <a href="https://www.rice.edu">Rice University</a><br/>
    Funded in part by the <a href="https://www.nsf.gov">National Science Foundation</a><br/>
    Documentation generated by <a href="http://www.doxygen.org/index.html">doxygen</a> 1.8.14
  </p></div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-9156598-2', 'auto');
  ga('send', 'pageview');
</script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</body>
</html>
